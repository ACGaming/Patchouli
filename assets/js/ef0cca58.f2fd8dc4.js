"use strict";(self.webpackChunkpatchouli_docs=self.webpackChunkpatchouli_docs||[]).push([[627],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,f=d["".concat(s,".").concat(m)]||d[m]||l[m]||o;return n?a.createElement(f,i(i({ref:t},u),{},{components:n})):a.createElement(f,i({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4913:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],c={},s="1.17 Upgrade Guide",p={unversionedId:"upgrading/upgrade-guide-117",id:"upgrading/upgrade-guide-117",isDocsHomePage:!1,title:"1.17 Upgrade Guide",description:"Several changes were made during the 1.17 update cycle to make Patchouli easier to maintain and resolve longstanding warts and bugs.",source:"@site/docs/upgrading/upgrade-guide-117.md",sourceDirName:"upgrading",slug:"/upgrading/upgrade-guide-117",permalink:"/Patchouli/docs/upgrading/upgrade-guide-117",editUrl:"https://github.com/VazkiiMods/Patchouli/edit/documentation/docs/upgrading/upgrade-guide-117.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Projected Future Changes",permalink:"/Patchouli/docs/upgrading/future"}},u=[{value:"Fully qualified names",id:"fully-qualified-names",children:[]},{value:"Resource Pack-based books",id:"resource-pack-based-books",children:[]},{value:"Convenience recipe type for books",id:"convenience-recipe-type-for-books",children:[]}],l={toc:u};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"117-upgrade-guide"},"1.17 Upgrade Guide"),(0,o.kt)("p",null,"Several changes were made during the 1.17 update cycle to make Patchouli easier to maintain and resolve longstanding warts and bugs."),(0,o.kt)("p",null,"This page highlights some of the more major changes you may run into as a book author."),(0,o.kt)("h3",{id:"fully-qualified-names"},"Fully qualified names"),(0,o.kt)("p",null,"All IDs in Patchouli books must now be fully qualified with a namespace. This includes:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Template component IDs"),(0,o.kt)("li",{parentName:"ul"},"Page types"),(0,o.kt)("li",{parentName:"ul"},"Page categories"),(0,o.kt)("li",{parentName:"ul"},"Template IDs")),(0,o.kt)("p",null,"The built-in page types and template components provided by Patchouli have namespace\n",(0,o.kt)("inlineCode",{parentName:"p"},"patchouli"),"."),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/VazkiiMods/Patchouli/commit/1ec2e4d6f0f74736a60b292f44c97db59f3eb82a#diff-e0281f985a32f2ce1812733801b9f87b4623c04184eadee5d6bca978d58300f3L2"},"This"),"\ngives an example of migrating. Of course, if you are a modder, you will be using your own\nmod-id to refer to your own categories, entries, and templates."),(0,o.kt)("h3",{id:"resource-pack-based-books"},"Resource Pack-based books"),(0,o.kt)("p",null,"Books can now specify ",(0,o.kt)("inlineCode",{parentName:"p"},"use_resource_pack: true")," in their book.json to have their contents\nloaded through the resource system."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This now allows book contents to be overrideable with resource packs."))),(0,o.kt)("p",null,"Despite residing in ",(0,o.kt)("inlineCode",{parentName:"p"},"assets")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"data"),', Patchouli books have never loaded properly from\nneither resourcepacks nor datapacks, and never responded to attempts to override them via\nthose two mechanisms. 1.17 includes the first steps towards resolving this. All book\ncontent can now be loaded and overrided freely using resource packs. "Book content"\nmeaning everything ',(0,o.kt)("em",{parentName:"p"},"except")," ",(0,o.kt)("inlineCode",{parentName:"p"},"book.json"),", which must remain in the same place as it has\nbeen from 1.14-1.16."),(0,o.kt)("p",null,"You opt in by specifying the above flag, and moving everything that isn't your book json\nfrom the ",(0,o.kt)("inlineCode",{parentName:"p"},"data")," folder to ",(0,o.kt)("inlineCode",{parentName:"p"},"assets"),"."),(0,o.kt)("p",null,"An example of this migration being done can be seen\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/VazkiiMods/Botania/commit/3f6266ce88231660da3ff305977edcb2e813e8d6?w=1"},"here"),"."),(0,o.kt)("h3",{id:"convenience-recipe-type-for-books"},"Convenience recipe type for books"),(0,o.kt)("p",null,"Crafting recipes for Patchouli books can now be provided using the ",(0,o.kt)("inlineCode",{parentName:"p"},"patchouli:book_recipe")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"patchouli:shapeless_book_recipe")," recipe types as a convenience, and to avoid issues related to lack of default support on Fabric for NBT recipe output. These recipes use the syntax based on vanilla ",(0,o.kt)("inlineCode",{parentName:"p"},"minecraft:crafting_shaped")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"minecraft:crafting_shapeless")," types, replacing the ",(0,o.kt)("inlineCode",{parentName:"p"},"output")," object with a ",(0,o.kt)("inlineCode",{parentName:"p"},"book")," string set to the ID of the book."),(0,o.kt)("p",null,"For an example, see ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/VazkiiMods/Patchouli/tree/63983afeec89bb254c3b9c506ffbd4bd17808d3e/src/main/resources/data/patchouli/recipes"},"the recipes for test books"),"."))}d.isMDXComponent=!0}}]);